<!-- https://script.google.com/macros/s/AKfycbzLPKomNtaFcBf3qhq4KsLa04JdQC31hzmodpaFcJ46a7fonz3VgfWqY3qys6SaTGmriQ/exec -->
 <!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Will You Be My Valentine ğŸ’–</title>

<style>
body{
  margin:0;
  font-family:Segoe UI, sans-serif;
  background:linear-gradient(135deg,#ffb6c1,#ffe4e1);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}

.card{
  background:white;
  padding:30px;
  width:90%;
  max-width:500px;
  border-radius:20px;
  text-align:center;
  box-shadow:0 20px 40px rgba(0,0,0,0.25);
}

h1,h2{color:#e75480}

.option{
  background:#ffe4ec;
  margin:10px 0;
  padding:12px;
  border-radius:15px;
  cursor:pointer;
}

.option:hover{background:#ffc0cb}

button{
  background:#ff69b4;
  color:white;
  border:none;
  padding:12px 25px;
  border-radius:25px;
  cursor:pointer;
  margin-top:15px;
}

textarea{
  width:100%;
  height:80px;
  border-radius:10px;
  padding:10px;
  margin-top:10px;
}

.popup{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  display:flex;
  justify-content:center;
  align-items:center;
}

.popup-content{
  background:white;
  padding:25px;
  border-radius:20px;
  max-width:350px;
}

img{
  width:100%;
  border-radius:15px;
  margin:15px 0;
}
</style>
</head>

<body>
<div id="app"></div>

<script>
// ğŸ”´ PASTE YOUR GOOGLE SCRIPT URL HERE
const API_URL = "https://script.google.com/macros/s/AKfycbzLPKomNtaFcBf3qhq4KsLa04JdQC31hzmodpaFcJ46a7fonz3VgfWqY3qys6SaTGmriQ/exec";
let noCount = 0;

let step = 0;

function logAnswer(question, selected, correct, isCorrect, extra=""){
  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      question,
      selected,
      correct,
      isCorrect,
      extra
    })
  });
}

function popup(msg, next=false){
  closePopup(); // remove any existing popup first

  document.body.insertAdjacentHTML("beforeend",`
    <div class="popup">
      <div class="popup-content">
        <p>${msg}</p>
        <button onclick="${next ? 'next()' : 'closePopup()'}">
          ${next ? 'Next ğŸ’–' : 'Try Again ğŸ’•'}
        </button>
      </div>
    </div>
  `);
}


function closePopup(){
  const popup = document.querySelector(".popup");
  if (popup) popup.remove();
}


function next(){
  closePopup();
  step++;
  render();
}


function wrong(question, selected, correct) {
  logAnswer(question, selected, correct, false);

  let msg = "";

  if (question === "Q1")
    msg = "ğŸ˜„ Heheâ€¦ not this one. That moment was too special to forget ğŸ’•";

  if (question === "Q2")
    msg = "ğŸ¤­ Not hereâ€¦ but I still remember that first hug so clearly ğŸ«‚ğŸ’–";

  if (question === "Q3")
    msg = "ğŸ˜Œ Nopeâ€¦ but that place became magical because of us ğŸ’";

  if (question === "Q4")
    msg = "ğŸ¥¹ That answer felt incompleteâ€¦ try again from your heart ğŸ’–";

  popup(msg);
}


function correct(question, selected, correctAnswer) {
  logAnswer(question, selected, correctAnswer, true);

  let msg = "";

  if (question === "Q1")
    msg = "ğŸ¥° YESSS! You remembered the exact moment ğŸ’– That night changed everything âœ¨";

  if (question === "Q2")
    msg = "ğŸ«‚ Awwwâ€¦ that hug still lives in my heart ğŸ¥¹ğŸ’";

  if (question === "Q3")
    msg = "ğŸŒ„ Perfect! That view + you = forever memory ğŸ’–";

  if (question === "Q4")
    msg = "ğŸ¥¹ Reading this made my heart meltâ€¦ thank you for loving me ğŸ’•";

  popup(msg, true);
}


function playfulNo() {
  noCount++;

  let message = "";

  if (noCount === 1) {
    message = "ğŸ˜­ How can you do this to meâ€¦<br><br>Choose wisely ğŸ’–";
  } else if (noCount === 2) {
    message = "ğŸ˜¢ My heart just skipped a beatâ€¦<br><br>I really thought youâ€™d say yes ğŸ¥º";
  } else {
    message = "ğŸ˜Œ Okay okayâ€¦ I know you.<br><br>Youâ€™ll say YES, I trust you ğŸ’•";
  }

  logAnswer(
    "Q5 Valentine",
    `No/Maybe (${noCount})`,
    "Yes",
    false,
    `Popup shown: ${noCount}`
  );

  popup(message);
}


function render(){
  const app=document.getElementById("app");

  if(step===0){
    app.innerHTML=`
    <div class="card">
      <h1>Hey My Love ğŸ’Œ</h1>
      <p>I made something special just for you ğŸ’–</p>
      <button onclick="next()">Start ğŸ’•</button>
    </div>`;
  }

  if(step===1){
    app.innerHTML=`
    <div class="card">
      <h2>Question 1 â£ï¸</h2>
      <p>When did I confess my feelings?</p>
      <div class="option" onclick="wrong('Q1','14 Feb 2025','3 May 2025 00:56 AM')">14 Feb 2025</div>
      <div class="option" onclick="wrong('Q1','3 May 2025 12:56 PM','3 May 2025 00:56 AM')">3 May 2025 â€“ 12:56 PM</div>
      <div class="option" onclick="correct('Q1','3 May 2025 00:56 AM','3 May 2025 00:56 AM')">3 May 2025 â€“ 00:56 AM</div>
      <div class="option" onclick="wrong('Q1','3 May 2025 12:56 AM','3 May 2025 00:56 AM')">3 May 2025 â€“ 12:56 AM</div>
    </div>`;
  }

  if(step===2){
    app.innerHTML=`
    <div class="card">
      <h2>Question 2 ğŸ¤—</h2>
      <p>Where did we hug first?</p>
      <div class="option" onclick="wrong('Q2','Inside theatre','Outside theatre')">Inside theatre</div>
      <div class="option" onclick="correct('Q2','Outside theatre','Outside theatre')">Outside theatre</div>
      <div class="option" onclick="wrong('Q2','Bus stop','Outside theatre')">Bus stop</div>
      <div class="option" onclick="wrong('Q2','Home','Outside theatre')">Home</div>
    </div>`;
  }

  if(step===3){
    app.innerHTML=`
    <div class="card">
      <h2>Question 3 ğŸï¸</h2>
      <p>Where did we recreate this?</p>
      <img src="X.jpg">
      <div class="option" onclick="wrong('Q3','Marine Drive','Tiger Point')">Marine Drive</div>
      <div class="option" onclick="correct('Q3','Tiger Point, Lonavala','Tiger Point')">Tiger Point, Lonavala</div>
      <div class="option" onclick="wrong('Q3','Mahabaleshwar','Tiger Point')">Mahabaleshwar</div>
      <div class="option" onclick="wrong('Q3','Pawna Lake','Tiger Point')">Pawna Lake</div>
    </div>`;
  }

  if(step===4){
    app.innerHTML=`
    <div class="card">
      <h2>Question 4 âœï¸</h2>
      <textarea id="why" placeholder="Why do you love me? ğŸ’–"></textarea>
      <textarea id="gift" placeholder="Favourite gift ğŸ"></textarea>
      <button onclick="submitText()">Submit ğŸ’•</button>
    </div>`;
  }

  if(step===5){
    app.innerHTML=`
    <div class="card">
      <h2>Final Question ğŸ’</h2>
      <p>Will you be my Valentine?</p>
      <div class="option" onclick="playfulNo()">No ğŸ˜…</div>
      <div class="option" onclick="playfulNo()">Maybe ğŸ¤”</div>
      <div class="option" onclick="correct('Q5','Yes','Yes')">YES ğŸ’–</div>

    </div>`;
  }

  if(step===6){
    app.innerHTML=`
    <div class="card">
      <h1>YEAYYYY!!! ğŸ‰ğŸ’–</h1>
      <h2>I WON ğŸ¥°</h2>
      <p>Happy Valentineâ€™s my love ğŸ’âœ¨ğŸ«¶</p>
    </div>`;
  }
}

function submitText(){
  const why = document.getElementById("why").value.trim();
  const gift = document.getElementById("gift").value.trim();

  if (!why || !gift) {
    popup("ğŸ¥º Donâ€™t leave this emptyâ€¦ I really want to know ğŸ’–");
    return;
  }

  logAnswer(
    "Q4",
    "Text Submitted",
    "Heartfelt Answer",
    true,
    `Why: ${why} | Gift: ${gift}`
  );

  popup("ğŸ¥¹ Reading this made my heart meltâ€¦ thank you for loving me ğŸ’•", true);
}


render();
</script>
</body>
</html>
